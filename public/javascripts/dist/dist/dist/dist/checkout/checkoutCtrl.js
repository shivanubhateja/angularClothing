angular.module("mainApp").controller("checkoutCtrl",["$scope","$stateParams","$rootScope","$state",function(e,t,a,r){e.cartDetails=JSON.parse(localStorage.getItem("finalCart")),e.cartDetailsRefined=[],e.forms={},a.hideCartFromNavBar=!0,e.totalAmount=0,a.cartDropDownVisible=!1,e.addressDetails={},e.onload=function(){for(var t=0;t<e.cartDetails.length;t++)e.cartDetailsRefined[t]={productId:e.cartDetails[t].productId,quantity:e.cartDetails[t].quantity,size:e.cartDetails[t].size},e.totalAmount+=e.cartDetails[t].quantity*e.cartDetails[t].productDetails.price},e.checkForsizeAvailability=function(e){},e.checkIfAddressIsAlreadyStoredInDevice=function(){var t=localStorage.getItem("address");t?(e.newAddress=!1,e.addressDetails=JSON.parse(t)):e.newAddress=!0},e.placeOrderAndPayButtonClicked=function(){e.showErrors=!0,(!e.newAddress||e.forms.addressForm.$valid)&&(localStorage.setItem("address",JSON.stringify(e.addressDetails)),localStorage.removeItem("finalCart"),"buyNow"!==t.src&&(localStorage.setItem("cartDetails",JSON.stringify([])),a.numberOfProductsInCart=0),r.go("orderStatus",{orderId:"af"}))},e.$on("$stateChangeStart",function(){a.hideCartFromNavBar=!1}),e.differentAddressButton=function(){localStorage.removeItem("address"),e.newAddress=!0,e.addressDetails={}},null===e.cartDetails?r.go("homePage"):(e.onload(),e.checkIfAddressIsAlreadyStoredInDevice())}]);