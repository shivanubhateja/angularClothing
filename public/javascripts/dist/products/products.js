angular.module("mainApp").controller("productsCtrl",["$scope","$stateParams","productService","$location","$anchorScroll","$state","$rootScope",function(t,a,o,e,s,l,r){if(t.init=function(a,e,s,l,r){c++,localStorage.setItem("pageNo",c),o.getproductsToDisplay(a,e,s,l,r,c).then(function(a){t.productsToDisplay=a.data.products,t.totalCount=a.data.totalCount,localStorage.setItem("totalProducts",t.totalCount),a.data.totalCount>t.productsToDisplay.length?t.moreItemsAvailable=!0:t.moreItemsAvailable=!1,localStorage.setItem("products",JSON.stringify(t.productsToDisplay))},function(t){})},t.loadMore=function(){c++,localStorage.setItem("pageNo",c),o.getproductsToDisplay(t.params.gender,t.params.superCategory,t.params.subCategory,t.params.src,t.tagsSelected,c).then(function(a){t.productsToDisplay.length;t.totalCount=a.data.totalCount,localStorage.setItem("totalProducts",t.totalCount),t.productsToDisplay=t.productsToDisplay.concat(a.data.products),a.data.totalCount>t.productsToDisplay.length?t.moreItemsAvailable=!0:t.moreItemsAvailable=!1,localStorage.setItem("products",JSON.stringify(t.productsToDisplay))},function(t){})},t.changeTags=function(a){t.tagsSelected.indexOf(a)>=0?t.tagsSelected.splice(t.tagsSelected.indexOf(a),1):t.tagsSelected.push(a),c=0,t.init(t.params.gender,t.params.superCategory,t.params.subCategory,t.params.src,t.tagsSelected,c)},t.openProduct=function(t,a,o){localStorage.setItem("anchor",a+o),l.go("productDetails",{productId:a})},t.scrollToTop=function(){$("html, body").animate({scrollTop:0},"fast")},r.goingToHeader=!1,a.src)if("chef"===a.src);else{t.params=a;var c=localStorage.getItem("pageNo"),n=a.src;t.productsToDisplay=JSON.parse(localStorage.getItem("products")),$(document).ready(function(){e.hash(n),s()}),t.totalCount=localStorage.getItem("totalProducts"),t.totalCount>t.productsToDisplay.length?t.moreItemsAvailable=!0:t.moreItemsAvailable=!1}else{t.params=a;c=0;localStorage.setItem("pageNo",c),t.totalCount=0,localStorage.setItem("totalProducts",t.totalCount),t.tagsSelected=a.tags,t.moreItemsAvailable=!0,t.loadingItems=!1,t.tags=JSON.parse(localStorage.getItem("tags")),t.init(t.params.gender,t.params.superCategory,t.params.subCategory,t.params.src,t.tagsSelected)}$(document).ready(function(){$(".owl-carousel.categories").owlCarousel({items:2,dots:!1})})}]);